I"©<p>With the <a href="/2016/04/23/32k-ram-for-osi">32K OSI RAM board</a> working, I decided to expand it to a full 64K using the expandable features I‚Äôd planned into the original 32K board. Built on the same <a href="/2016/04/22/cloning-the-495">OSI 495 prototype board</a> as the original, this 64K expansion requires minimal modification to the 32K board, and the addition of three additional ICs, including the 32K x 8 static RAM.</p>

<p>We‚Äôll only look at the additions to the 32K RAM board, so if you haven‚Äôt read that writeup, either <a href="/2016/04/23/32k-ram-for-osi">head there now</a> or look over the <a href="http://filedump.glitchwrks.com/projects/osi_ram/64k_ram.pdf">full schematic</a> first. Clicking any schematic image below will take you to the full PDF, or you can <a href="http://filedump.glitchwrks.com/projects/osi_ram/64k_ram.pdf">download it here</a>.</p>

<h2 id="segment-selection">Segment Selection</h2>

<p>Segment selection for the upper 32K is very similar to the lower 32K, with one exception: <code>A15</code> is inverted, such that the 32K SRAM occupies the top half of the 64K address space. This lets us enable the upper 32K in 4K increments, just as with the lower 32K. In addition to mapping around ROM and I/O devices, this allows the board to occupy <code>0xD000</code> - <code>0xEFFF</code>, which is required for OSI CP/M with the 510 CPU board.</p>

<p class="center"><a href="http://filedump.glitchwrks.com/projects/osi_ram/64k_ram.pdf"><img src="/images/osi/64k_ram/segment_select.png" alt="Segment select circuit" /></a></p>

<p>The <code>/MM</code> line is again left for possible memory management expansion. If you‚Äôre not using memory management (most OSI systems aren‚Äôt), just tie it to ground for now.</p>

<h2 id="data-direction-generator">Data Direction Generator</h2>

<p>The Data Direction generator from the 32K board is modified for 64K by removing the connection to pin 1 of U6 and instead using the NOR of <code>/CE1</code> and <code>/CE2</code>. This NORed value can be generated using another element of the 74LS00 at U6, as shown:</p>

<p class="center"><a href="http://filedump.glitchwrks.com/projects/osi_ram/64k_ram.pdf"><img src="/images/osi/64k_ram/data_direction.png" alt="Data Direction circuit" /></a></p>

<p>This will cause <code>DD</code> to pull low for any reads in any of the enabled 4K segments, regardless of whether they‚Äôre in the lower or upper 32K of the board‚Äôs capacity.</p>

<h2 id="the-static-ram">The Static RAM</h2>

<p>This board adds another 62256 JEDEC-compatible static RAM. It‚Äôs a 32K x 8 part that‚Äôs common, widely available, cheap, and easy to work with. It‚Äôs available in fast enough speeds that no wait states are required for any of the three processors available on my 510 CPU board. Wiring is straightforward:</p>

<p class="center"><a href="http://filedump.glitchwrks.com/projects/osi_ram/64k_ram.pdf"><img src="/images/osi/64k_ram/sram.png" alt="Static RAM pinout" /></a></p>

<p>All connections to the upper 32K are bussed to the lower 32K except for <code>/CS</code>, which is fed from the segment selector for the upper 32K.</p>

<h2 id="building-the-circuit">Building the Circuit</h2>

<p>If you‚Äôre building this circuit on an OSI 495 prototype board, you can follow my layout for IC locations. The locations are labeled corresponding to the provided schematic, and pin designations should match, too.</p>

<p class="center"><a href="/images/osi/64k_ram/front.jpg"><img src="/images/osi/64k_ram/scaled/front.jpg" alt="Device placement" /></a> <a href="/images/osi/64k_ram/device_closeup.jpg"><img src="/images/osi/64k_ram/scaled/device_closeup.jpg" alt="Device closeup" /></a></p>

<p>Expansion started with the addition of three sockets: a 28-pin socket for the SRAM, a 16-pin socket for U8, and a 14-pin socket for U9. Be sure to connect the Vcc and GND pins to +5 and GND, respectively, on the prototype board. I typically use a cut off component lead soldered to the pad and trace, and clipped to length. If you bend the component lead into an ‚ÄúL‚Äù shape, you can hold the upper part of the ‚ÄúL‚Äù with pliers while soldering the lower part down. Clip off excess lead length with close diagonal cutters.</p>

<p>Since the new SRAM at U10 was mostly bussed directly to the existing SRAM at U7, I went ahead and connected it up first. Make sure to skip pin 20 on the new SRAM ‚Äì this will be fed from the segment select circuit for the upper half of memory. The segment select circuit is almost identical to the circuit used in the 32K RAM board, except that pin 4 of the 74LS138 is fed with the inverted <code>/A15</code>. As you can see from the pictures, my layout of SW2, U8, and U9 mirrors that of the 32K layout. Don‚Äôt forget to connect U8 pin 5 to ground if you‚Äôre not using memory management!</p>

<p>With the new chips laid down, it‚Äôs time to modify the old Data Direction generation circuit. Remove the wire from U4 pin 8 to U6 pin 1, then wire in the new circuit that combines <code>/CE1</code> and <code>/CE2</code>.</p>

<p>Here‚Äôs a full view of the back of the finished prototype:</p>

<p class="center"><a href="/images/osi/64k_ram/back.jpg"><img src="/images/osi/64k_ram/scaled/back.jpg" alt="64K RAM wiring" /></a> <a href="/images/osi/64k_ram/wiring_closeup.jpg"><img src="/images/osi/64k_ram/scaled/wiring_closeup.jpg" alt="64K RAM wiring closeup" /></a></p>

<p>Colors are the same as used with the 32K build:</p>

<ul>
  <li>Blue is address, unbuffered directly from the OSI bus</li>
  <li>Yellow is internal data bus</li>
  <li>Green is control signalling</li>
  <li>Red was used for both the OSI data bus and between SW1 -&gt; U4, SW2 -&gt; U9</li>
</ul>

<p>Check everything over with a multimeter or continuity tester, install all ICs, enable the 4K segments you want to use (SW2 on == segment enabled), and install the board in your Ohio Scientific. Power on and find out if you‚Äôve got any wiring errors! Please <a href="https://services.glitchworks.net/ng/messages/new">let me know</a> if you build one of these boards, if you have problems, or if you‚Äôd like to buy a 495 board for it.</p>

<p class="center">
    <script language="javascript" src="https://services.glitchworks.net/counters/64k_ram"></script> memory errors avoided
</p>

:ET